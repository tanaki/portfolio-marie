(function($){var methods={init:function(options){Cufon.replace('#header .menu-link, #resume, .keywords span',{hover:true,fontFamily:'Helvetica Neue'});Cufon.replace('#menu span.menu-content, #copyright',{fontFamily:'HelveticaNeueClassic'});},initProject:function(){Cufon.replace(".carousel-pagin, .bottom-project-title",{fontFamily:'Helvetica Neue'});Cufon.replace(".bottom-project-desc",{fontFamily:'HelveticaNeueClassic'});},work:function(){Cufon.replace("#menu #work .menu-link",{fontFamily:'Helvetica Neue'});Cufon.replace("#menu #work .menu-content",{fontFamily:'HelveticaNeueClassic'});}};$.fn.MLFont=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.MLFont');}};})(jQuery);(function($){var methods={init:function(options){var self=this;$("a",this).click(function(){var target=$(this).attr('href');if($.address.value()==target)return false;$.address.value(target);$(window).MLOpenProject("open",target);return false;});Cufon.replace("#footer-project a",{fontFamily:'Helvetica Neue'});}};$.fn.MLFooterProject=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.MLFooterProject');}};})(jQuery);(function($){var context=null,currentValue=0,max=0,idAnimated=0,carousel=null,currentLi=null;var methods={init:function(options){var self=this;carousel=options.carousel;context=this;max=carousel.size();currentValue=options.startValue;idAnimated=currentValue;if(max==1){$("li",self).css("opacity",1);$(".carousel-prev, .carousel-next").css("cursor","default").click(function(){return false;});return;}
methods._opacity(self);methods._updateAside();$(window).keyup(function(e){if(e.keyCode==37){carousel.prev();methods._prev();}
if(e.keyCode==39){carousel.next();methods._next();}});$(".carousel-prev").click(function(){carousel.prev();methods._prev();return false;});$(".carousel-next").click(function(){carousel.next();methods._next();return false;});$(".carousel-prev").hover(function(){$(".arrows").stop().css({"opacity":0,"background-image":"url(/img/site/misc/sprite_arrows_24.png)","background-position":"left center","background-repeat":"no-repeat"}).animate({"opacity":1});},function(){$(".arrows").stop().animate({"opacity":0});});$(".carousel-next").hover(function(){$(".arrows").stop().css({"opacity":0,"background-image":"url(/img/site/misc/sprite_arrows_24.png)","background-position":"right center","background-repeat":"no-repeat"}).animate({"opacity":1});},function(){$(".arrows").stop().animate({"opacity":0});});$(window).bind({"IS_ANIMATING":function(){idAnimated=currentValue;},"END_ANIMATING":function(){idAnimated=currentValue;}});},_prev:function(){if(currentValue!=idAnimated)return;currentValue=(currentValue>0)?(currentValue-1):max-1;methods._opacity();methods._updateAside();},_next:function(){if(currentValue!=idAnimated)return;currentValue=(currentValue>max-2)?0:currentValue+1;methods._opacity();methods._updateAside();},_opacity:function(){$(".carousel-current-item").animate({"opacity":0.6});currentLi=$("li",context).get(currentValue);$(currentLi).animate({"opacity":1},function(){$(this).addClass("carousel-current-item");});},_updateAside:function(){methods._updatePagin();methods._updateCaption();methods._updateFont();},_updatePagin:function(){$(".carousel-pagin").html((currentValue+1)+"/"+max);},_updateCaption:function(){$(".bottom-project-desc").html($(".caption",currentLi).html());},_updateFont:function(){Cufon.replace(".carousel-pagin",{fontFamily:'Helvetica Neue'});Cufon.replace(".bottom-project-desc",{fontFamily:'HelveticaNeueClassic'});}};$.fn.MLImprovedCarousel=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.MLImprovedCarousel');}};})(jQuery);$(window).resize(function(){$(window).MLResize("resize");});$(window).ready(function(){$("html").removeClass("noJS").addClass("hasJS");if($.browser.mozilla)$("html").addClass("ff");if($.browser.webkit)$("html").addClass("webkit");if(navigator.appVersion.indexOf("Mac")!=-1)$("html").addClass("mac");$(window).MLPreloadImages();$(window).MLFont();$("#logo").MLLogo();$("#menu").MLMenu();$(window).MLResize("resize");});$(window).bind({"LOAD_ITEM":loadedItem,"LOAD_COMPLETE":loadComplete,"NAV_DISPLAYED":navDisplayed});function loadedItem(e,o){$("#loader").animate({"width":(o.index*100/o.len)+"%"},20);}
function loadComplete(){$("#loader").fadeOut(300,function(){$("#menu").MLMenu("display");});}
function navDisplayed(){$("#content").css({"width":"100%","display":"block","min-width":1240});$(window).MLResize("resize");if($.address.value()!="/"){$(".mosaic ul a").MLOpenProject("open",$.address.value());}else{$(".mosaic").MLMosaic("display");$(".mosaic ul a").MLOpenProject();}}
(function($){var methods={init:function(options){var self=this;$(this).click(function(){$("#menu").MLMenu("reset");if($.address.value()!="/"){$.address.value("/");$("#content").fadeOut(300,function(){$(".project-detail").MLOpenProject("openMosaic");})}
return false;});}};$.fn.MLLogo=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.MLLogo');}};})(jQuery);(function($){var context=null,currentIndex=null,isAnimating=false,lis=null;var methods={init:function(options){var self=this;lis=$("li",self);context=this;$(".menu-link",self).click(function(){var index=$(this).data("index");if(isAnimating)return false;if(currentIndex==null||currentIndex!=index){$("#menu a.current").removeClass("current");$(this).addClass("current");methods.open(index);}else{methods.reset();}
return false;});},open:function(index){isAnimating=true;var indexes=[0,1,2,3];indexes.splice(index,1);for(var i=0;i<indexes.length;i++){$(lis[indexes[i]]).animate({"width":"15.2%","margin-top":135});}
$(lis[index]).animate({"width":"51.2%"},function(){var $span=$("span",this);$span.css("display","block");var marginTop=$span.height()>0?125-$span.height():135;$(this).animate({"margin-top":marginTop},function(){isAnimating=false;});});currentIndex=index;},reset:function(){if(isAnimating)return false;$("a.current",context).removeClass("current");$("li",context).each(function(i,el){$(el).animate({"width":"24.2%","margin-top":135},function(){currentIndex=null;isAnimating=false;});});},display:function(){var lis=$("#menu li");$("#header-left").fadeIn(300,function(){$("#copyright").fadeIn();lis.each(function(i,el){$(el).delay(i*100).fadeIn(200,function(){if(i==lis.length-1){$(window).trigger("NAV_DISPLAYED");}});});});}};$.fn.MLMenu=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.menu');}};})(jQuery);(function($){var methods={init:function(){var self=this;$(self).click(function(){$.address.value($(this).attr('href'));methods.closeMosaic(this);return false;});},open:function(href){$.post(href,{"noLayout":"true"},function(htmlLoaded){$("#content").removeClass("mosaic").addClass("project-detail").html(htmlLoaded);$(window).MLFont("initProject");$("#menu").MLMenu("reset");$("#menu a.current").removeClass("current");$("#menu #work a").addClass("current");$("#menu").MLMenu("open",0);$("#menu #work .menu-link").html($(".bottom-project-title").html());$("#menu #work .menu-content").html($(".work-content").html());$(window).MLFont("work");methods._initProject();});},openMosaic:function(){$.post("/",{noLayout:true},function(htmlLoaded){$("#content").removeClass("project-detail").addClass("mosaic").html(htmlLoaded).fadeIn(function(){$(window).MLResize("home");$(".mosaic").MLMosaic("display");$(".mosaic ul a").MLOpenProject();$("#menu #work .menu-link").html("work");$("#menu #work .menu-content").html($(".work-content").html());$(window).MLFont();});});},_initProject:function(){$("#content").fadeIn(100,function(){$(window).MLResize("resize");$("#footer-project").MLFooterProject();var lis=$("ul.content-project li").length;var startValue=1;$("ul.content-project").jcarousel({start:startValue,scroll:1,wrap:"both",animation:800,easing:"easeInOutSine",itemFallbackDimension:1100,itemVisibleInCallback:{onBeforeAnimation:function(){$(window).trigger("IS_ANIMATING");},onAfterAnimation:function(){$(window).trigger("END_ANIMATING");}}}).animate({"opacity":1}).MLImprovedCarousel({carousel:$("ul.content-project").data("jcarousel"),startValue:startValue-1});});},closeMosaic:function(target){$("#content-top").animate({marginTop:228});$("#content-bottom").animate({marginTop:-228},function(){methods.open($(target).attr("href"));});}}
$.fn.MLOpenProject=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.MLOpenProject');}};})(jQuery);(function($){var isAnimatingTop=false,isAnimatingBottom=false;var methods={init:function(options){var self=this;},display:function(){$(window).MLResize("resize");var max=$(".line-container:first li").length-1;$(".mosaic li.project").each(function(i,el){var index=i>max?i-max:i;$(el).delay(index*120).fadeIn(200);});methods.hover();methods.carousel();},hover:function(){$(".mosaic ul a").hover(function(){var self=this;if(!$.browser.mozilla){$('.keywords span',self).each(function(i,el){$(el).stop().delay(i*100).animate({"margin-left":"1"});});}else{$('.keywords span',self).css("margin-left",1);}},function(){if(!$.browser.mozilla){$('.keywords span',this).each(function(i,el){$(el).stop(true).delay(i*100).animate({"margin-left":"210"});});}else{$('.keywords span',this).css("margin-left",210);}});},carousel:function(){$(".mosaic-prev-top").mouseover(function(){methods._prev(".line-container:first",-135,"top");});$(".mosaic-next-top").mouseover(function(){var max=$(window).width()-$(".line-container:first").width()+100;methods._next(".line-container:first",max,"top");});$(".mosaic-prev-bottom").mouseover(function(){methods._prev(".line-container:last",-135,"bottom");});$(".mosaic-next-bottom").mouseover(function(){var max=$(window).width()-$(".line-container:last").width()+100;methods._next(".line-container:last",max,"bottom");});},_prev:function(target,max,origin){var base=parseInt($(target).css("margin-left"));if(isAnimatingTop||isAnimatingBottom||base>max){return false;}
if(origin=="top")isAnimatingTop=true;if(origin=="bottom")isAnimatingBottom=true;while(base<max){base+=232;}
$(target).animate({"margin-left":base},600,"easeInOutSine",function(){$(".mosaic-prev-"+origin).addClass("disable");$(".mosaic-next-"+origin).removeClass("disable");if(origin=="top")isAnimatingTop=false;if(origin=="bottom")isAnimatingBottom=false;});},_next:function(target,max,origin){var base=parseInt($(target).css("margin-left"));if(isAnimatingTop||isAnimatingBottom||base<max){return false;}
if(origin=="top")isAnimatingTop=true;if(origin=="bottom")isAnimatingBottom=true;while(base>max){base-=232;}
$(target).animate({"margin-left":base},600,"easeInOutSine",function(){$(".mosaic-next-"+origin).addClass("disable");$(".mosaic-prev-"+origin).removeClass("disable");if(origin=="top")isAnimatingTop=false;if(origin=="bottom")isAnimatingBottom=false;});}};$.fn.MLMosaic=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.MLMosaic');}};})(jQuery);(function($){var methods={init:function(options){var self=this,len=aImages.length,width=$(window).width(),i=1;$.imgpreload(aImages,{each:function(){$(window).trigger("LOAD_ITEM",{index:i,width:width,len:len});i++;},all:function(){$(window).trigger("LOAD_COMPLETE");}});}};$.fn.MLPreloadImages=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.MLPreloadImages');}};})(jQuery);(function($){var methods={init:function(options){var self=this;},resize:function(){var marginTop=Math.floor(($(window).height()/2)-394);if(marginTop>0)$("#header").css("margin-top",marginTop);else $("#header").css("margin-top",0);methods.background();methods.footerBackground();if($.address.value()=="/"){methods.home();}},background:function(){if(!$("#wrapper").hasClass("hasBackground")){$("#wrapper").addClass("hasBackground");return;}
var top=$("#logo").position().top-73;var left=Math.round(($(window).width()-$(".content-inner").width())/2)+13;if($.address.value()!="/")left-=8;$("#wrapper").css({"background-position":(left+"px "+top+"px"),"background-image":"url(/img/site/misc/bg_global_24.png)"});},footerBackground:function(){if(!$("#footer-project ul").position())return;var left=($.browser.safari||$.browser.msie)?parseInt($("#footer-project ul").css("margin-left")):parseInt($("#footer-project ul").position().left);$("#footer-project").css("background-position",(left+60)+"px top");},home:function(){var topWidth=$("#content-top li").length*250+115;var bottomWidth=$("#content-bottom li").length*250+103;$("#content-top").parent().css("width",topWidth);$("#content-bottom").parent().css("width",bottomWidth);var margin="0 auto",marginLast="0 auto";if($(window).width()<$(".content-inner").width()){var marginLeft=Math.round(($(window).width()-$(".content-inner").width())/2);margin="0 0 0 "+marginLeft+"px";marginLast="0 0 0 "+(marginLeft+5)+"px";}
$(".line-container:first").css("margin",margin);$(".line-container:last").css("margin",marginLast);if($(window).width()+100<$(".content-inner").width()){$(".mosaic-prev-top, .mosaic-next-top, .mosaic-prev-bottom, .mosaic-next-bottom").removeClass("disable");}else{$(".mosaic-prev-top, .mosaic-next-top, .mosaic-prev-bottom, .mosaic-next-bottom").addClass("disable");}}};$.fn.MLResize=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.MLResize');}};})(jQuery);